# 杠杆倍数配置说明

## 当前状态

**原代码中没有设置杠杆倍数**，会使用 OKX 账户中该交易对的默认杠杆设置。

## 新增功能

代码已添加杠杆倍数配置支持，可以通过环境变量 `LEVERAGE` 设置。

## 配置方式

### 方式1：环境变量（推荐）

在 `.env` 文件中：

```bash
# 设置杠杆倍数（仅永续合约有效）
LEVERAGE=10  # 例如：1, 3, 5, 10, 20, 50, 100
```

### 方式2：Docker Compose

在 `.env` 文件中：

```bash
LEVERAGE=10
```

然后重启容器：

```bash
docker compose down
docker compose up -d
```

## 杠杆倍数说明

### 常见杠杆倍数

- **1x**：无杠杆（相当于现货）
- **3x**：3倍杠杆
- **5x**：5倍杠杆
- **10x**：10倍杠杆（常用）
- **20x**：20倍杠杆
- **50x**：50倍杠杆
- **100x**：100倍杠杆（高风险）

### 注意事项

1. **仅永续合约有效**：杠杆只对永续合约（swap）有效，现货交易不支持杠杆
2. **账户限制**：杠杆倍数不能超过 OKX 账户对该交易对的最大杠杆限制
3. **风险提示**：杠杆越高，风险越大，可能导致快速爆仓
4. **不配置则使用默认**：如果不设置 `LEVERAGE`，会使用 OKX 账户的默认杠杆设置

## 代码逻辑

- 如果配置了 `LEVERAGE`，下单时会自动设置杠杆倍数
- 如果未配置，使用账户默认杠杆（代码不主动设置）
- 平仓时不需要设置杠杆，使用持仓的杠杆

## 示例配置

```bash
# 保守策略：3倍杠杆
LEVERAGE=3

# 标准策略：10倍杠杆
LEVERAGE=10

# 激进策略：20倍杠杆（高风险）
LEVERAGE=20

# 不设置杠杆，使用账户默认
# LEVERAGE=  （留空或不配置）
```

## 风险提示

⚠️ **重要**：
- 杠杆交易风险极高，可能导致快速亏损
- 建议先在模拟盘测试不同杠杆倍数的效果
- 不要使用超过自己风险承受能力的杠杆倍数
- 杠杆倍数会影响盈亏比例，需要相应调整止损止盈策略
