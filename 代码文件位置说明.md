# 代码文件位置说明

## 项目根目录

```
/Users/cast/my_trading_system/new trader/
```

---

## 核心代码文件

### 1. 实盘交易代码（已修复所有bug）

**位置**：
```
/Users/cast/my_trading_system/new trader/live_trading_v52.py
```

**说明**：
- 实盘/模拟盘交易主程序
- 已修复所有严重bug（杠杆计算、平仓数量、网格持仓管理、止损止盈重试等）
- 使用 `BacktestEngine` 生成交易信号
- 支持OKX和Binance交易所
- 支持数据缓存机制

---

### 2. 策略核心代码（回测引擎）

**位置**：
```
/Users/cast/my_trading_system/new trader/strategies/box_strategy_v5_2.py
```

**说明**：
- v5.2策略核心实现
- 包含 `BacktestEngine`（回测引擎）
- 包含 `RiskManager`（风险管理器）
- 包含 `GridStrategyGenerator`（网格策略生成器）
- 包含 `MarketRegimeDetector`（市场状态检测器）
- 包含 `BigTrendDetector`（大趋势检测器）

**关键类**：
- `BacktestEngine` - 回测引擎（实盘也使用这个生成信号）
- `RiskManager` - 风险管理器
- `StrategyConfig` - 策略配置类

---

### 3. 多币种交易管理

**位置**：
```
/Users/cast/my_trading_system/new trader/multi_symbol_trading.py
```

**说明**：
- 多币种同时交易管理
- 支持多个交易对同时运行

---

## 回测脚本

### 1. 年度回测（2022-2024）

**位置**：
```
/Users/cast/my_trading_system/new trader/backtest_yearly_2022_2024.py
```

**说明**：
- 分别回测2022、2023、2024年数据
- 生成年度总结表格

---

### 2. 复利模式回测（2022-2025/11）

**位置**：
```
/Users/cast/my_trading_system/new trader/backtest_compound_2022_2025.py
```

**说明**：
- 复利模式回测（利润再投资）
- 从2022年到2025年11月

---

### 3. 信号检查脚本

**位置**：
```
/Users/cast/my_trading_system/new trader/check_recent_signals.py
/Users/cast/my_trading_system/new trader/check_recent_signals_fixed.py
```

**说明**：
- 检查最近几天的交易信号
- 用于调试和验证策略逻辑

---

## 配置文件

### 1. Docker部署配置

**位置**：
```
/Users/cast/my_trading_system/new trader/Dockerfile
/Users/cast/my_trading_system/new trader/docker-compose.yml
/Users/cast/my_trading_system/new trader/.dockerignore
```

---

## 数据缓存目录

**位置**：
```
/Users/cast/my_trading_system/new trader/data_cache/
```

**说明**：
- 自动创建的数据缓存目录
- 存储历史K线数据（.pkl文件）
- 格式：`{SYMBOL}_15m.pkl`

---

## 文档文件

### 1. 代码审查报告

**位置**：
```
/Users/cast/my_trading_system/new trader/实盘代码审查报告.md
```

**说明**：
- 详细的bug审查报告
- 包含10个发现的bug和修复方案

---

### 2. 交易规则一致性检查报告

**位置**：
```
/Users/cast/my_trading_system/new trader/交易规则一致性检查报告.md
```

**说明**：
- 对比回测代码和实盘代码的交易规则
- 确认规则一致性

---

### 3. 数据缓存和分批获取修复说明

**位置**：
```
/Users/cast/my_trading_system/new trader/数据缓存和分批获取修复说明.md
```

**说明**：
- 数据缓存机制说明
- 分批获取数据修复说明

---

### 4. 代码文件位置说明（本文件）

**位置**：
```
/Users/cast/my_trading_system/new trader/代码文件位置说明.md
```

---

## 回测结果目录

### 1. 年度回测结果

**位置**：
```
/Users/cast/my_trading_system/new trader/backtest_yearly_results/
```

**包含**：
- 各年度回测结果CSV文件
- 回测总结报告.md

---

### 2. 复利模式回测结果

**位置**：
```
/Users/cast/my_trading_system/new trader/backtest_compound_results/
```

**包含**：
- 复利模式回测结果CSV文件
- 复利模式回测结果报告.md

---

## 项目结构总览

```
/Users/cast/my_trading_system/new trader/
├── live_trading_v52.py                    # 【核心】实盘交易代码（已修复所有bug）
├── multi_symbol_trading.py                # 多币种交易管理
├── backtest_yearly_2022_2024.py          # 年度回测脚本
├── backtest_compound_2022_2025.py        # 复利模式回测脚本
├── check_recent_signals.py               # 信号检查脚本
├── check_recent_signals_fixed.py          # 修复版信号检查脚本
│
├── strategies/
│   └── box_strategy_v5_2.py              # 【核心】策略核心代码（回测引擎）
│
├── data_cache/                            # 数据缓存目录（自动创建）
│   ├── BTC_USDT_USDT_15m.pkl
│   └── ...
│
├── backtest_yearly_results/               # 年度回测结果
│   ├── 回测总结报告.md
│   └── *.csv
│
├── backtest_compound_results/            # 复利模式回测结果
│   ├── 复利模式回测结果报告.md
│   └── *.csv
│
├── Dockerfile                             # Docker配置
├── docker-compose.yml                     # Docker Compose配置
├── .dockerignore                          # Docker忽略文件
│
├── 实盘代码审查报告.md                    # Bug审查报告
├── 交易规则一致性检查报告.md              # 规则一致性检查
├── 数据缓存和分批获取修复说明.md          # 数据缓存说明
└── 代码文件位置说明.md                    # 本文件
```

---

## 快速定位

### 如果要运行实盘交易：
```bash
cd /Users/cast/my_trading_system/new trader
python3 live_trading_v52.py
```

### 如果要查看策略核心代码：
```bash
cd /Users/cast/my_trading_system/new trader/strategies
cat box_strategy_v5_2.py
```

### 如果要查看修复后的实盘代码：
```bash
cd /Users/cast/my_trading_system/new trader
cat live_trading_v52.py
```

### 如果要查看代码审查报告：
```bash
cd /Users/cast/my_trading_system/new trader
cat 实盘代码审查报告.md
```

---

## 总结

**最重要的两个文件**：

1. **实盘交易代码**：
   - `/Users/cast/my_trading_system/new trader/live_trading_v52.py`
   - 这是你实际运行实盘交易的代码

2. **策略核心代码**：
   - `/Users/cast/my_trading_system/new trader/strategies/box_strategy_v5_2.py`
   - 这是策略逻辑的核心实现（回测和实盘都使用这个）

这两个文件包含了所有交易规则和逻辑。
